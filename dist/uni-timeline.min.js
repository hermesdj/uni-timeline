/*! uni-timeline - v0.1.0 - 2014-02-05
 * https://github.com/hermesdj/uni-timeline
 * Copyright (c) Jeremy Dallard <dallardj@gmail.com> 2014 Licensed  
 */
angular.module("uniTimeline",[]).provider("$uniTimeline",function(){this.$get=function(){var a=[],b=[],c={get:function(b){return b?-1!=a.indexOf(event)?a[b]:null:a},add:function(b){a.push(angular.copy(b))},remove:function(b){return-1!=a.indexOf(b)?a.splice(this.indexOf(b),1):!1},update:function(b){return-1!=a.indexOf(b)?a[a.indexOf(b)]=b:!1}},d={get:function(a){return a?-1!=b.indexOf(event)?b[a]:null:b},add:function(a){b.push(angular.copy(a))},remove:function(a){if(a){if(-1!=b.indexOf(a))return b.splice(this.indexOf(a),1)}else b=[]},update:function(a){return-1!=b.indexOf(a)?b[b.indexOf(event)]=a:!1}},e={dateToPixel:function(){},pixelToDate:function(){}};return{events:c,eras:d,tools:e}}}).directive("uniTimeline",["$window","$document","$uniTimeline",function(a,b,c){return{restrict:"EA",templateUrl:"templates/timeline.html",scope:{start:"=",end:"=",current:"="},link:function(d,e){function f(a){d.x=a.pageX-j,d.$apply()}function g(){b.unbind("mousemove",f),b.unbind("mouseup",g)}for(d.dates={},d.dates.major=[],i=d.start;i<=d.end;i+=100)d.dates.major.push(i);for(d.dates.minor=[],i=d.start;i<=d.end;i+=10)d.dates.minor.push(i);d.events=c.events.get();var h=e[0].children[0];d.getIndicatorPosition=function(){return h.offsetWidth/2},d.indicatorX=d.getIndicatorPosition,d.$watch(d.getIndicatorPosition,function(a){d.indicatorX=a},!0),angular.element(a).bind("resize",function(){d.$apply()});var j=0;d.x=0,angular.element(h).bind("mousedown",function(a){a.preventDefault(),j=a.pageX-d.x,b.on("mousemove",f),b.on("mouseup",g)})}}}]);